{"remainingRequest":"/home/ec2-user/environment/major-studio-2/frameworks/05-geo/node_modules/babel-loader/lib/index.js!/home/ec2-user/environment/major-studio-2/frameworks/05-geo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ec2-user/environment/major-studio-2/frameworks/05-geo/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/ec2-user/environment/major-studio-2/frameworks/05-geo/src/App.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ec2-user/environment/major-studio-2/frameworks/05-geo/src/App.vue","mtime":1614872581870},{"path":"/home/ec2-user/environment/major-studio-2/frameworks/05-geo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ec2-user/environment/major-studio-2/frameworks/05-geo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ec2-user/environment/major-studio-2/frameworks/05-geo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ec2-user/environment/major-studio-2/frameworks/05-geo/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZWMyLXVzZXIvZW52aXJvbm1lbnQvbWFqb3Itc3R1ZGlvLTIvZnJhbWV3b3Jrcy8wNS1nZW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgKiBhcyBkMyBmcm9tICJkMyI7CmltcG9ydCBtYXBib3hnbCBmcm9tICJtYXBib3gtZ2wiOwppbXBvcnQgbWFwIGZyb20gJy4vYWZyaWNhLmdlby5qc29uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtYXA6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwKSwge30sIHsKICAgICAgICBmZWF0dXJlczogbWFwLmZlYXR1cmVzLm1hcChmdW5jdGlvbiAoZikgewogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZiksIHt9LCB7CiAgICAgICAgICAgIHByb3BlcnRpZXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZi5wcm9wZXJ0aWVzKSwge30sIHsKICAgICAgICAgICAgICBjZW50cm9pZDogZDMuZ2VvQ2VudHJvaWQoZikKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgIH0pLAogICAgICB3aWR0aDogNDAwLAogICAgICBoZWlnaHQ6IDUwMCwKICAgICAgbWI6IG51bGwKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAvLyBodHRwczovL2Rldi50by9obWludG9oL2hvdy10by1tYXBib3gtd2l0aC12dWUtanMtMmEzNAogICAgbWFwYm94Z2wuYWNjZXNzVG9rZW4gPSBwcm9jZXNzLmVudi5WVUVfQVBQX01BUEJPWF9UT0tFTjsKICAgIHRoaXMubWIgPSBuZXcgbWFwYm94Z2wuTWFwKHsKICAgICAgY29udGFpbmVyOiAibWFwYm94LWNvbnRhaW5lciIsCiAgICAgIHN0eWxlOiAibWFwYm94Oi8vc3R5bGVzL21hcGJveC9zdHJlZXRzLXYxMSIsCiAgICAgIGNlbnRlcjogWzE4LCA0XSwKICAgICAgem9vbTogMiwKICAgICAgbWF4Qm91bmRzOiBbWy0xOCwgLTQwXSwgWzUzLCA0MF1dCiAgICB9KTsKICAgIHRoaXMubWIub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLm1iLmFkZFNvdXJjZSgiY291bnRyeVBhdGhzIiwgewogICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICBkYXRhOiBtYXAKICAgICAgfSk7CgogICAgICBfdGhpcy5tYi5hZGRMYXllcih7CiAgICAgICAgaWQ6ICdjb3VudHJpZXMnLAogICAgICAgIHR5cGU6ICdmaWxsJywKICAgICAgICBzb3VyY2U6ICdjb3VudHJ5UGF0aHMnLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAiZmlsbC1vcGFjaXR5IjogMC41CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHByb2plY3Rpb246IGZ1bmN0aW9uIHByb2plY3Rpb24oKSB7CiAgICAgIHJldHVybiBkMy5nZW9FcXVhbEVhcnRoKCkuY2VudGVyKFsxOCwgNF0pLnNjYWxlKDMyMCkudHJhbnNsYXRlKFt0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQgLyAyXSk7CiAgICB9LAogICAgZ2VvUGF0aDogZnVuY3Rpb24gZ2VvUGF0aCgpIHsKICAgICAgcmV0dXJuIGQzLmdlb1BhdGgodGhpcy5wcm9qZWN0aW9uKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uSG92ZXI6IGZ1bmN0aW9uIG9uSG92ZXIobmV4dEhvdmVyKSB7CiAgICAgIGlmIChuZXh0SG92ZXIgPT09IG51bGwpIHsKICAgICAgICBkMy5zZWxlY3QoJyNob3ZlcicpLnRleHQoJycpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHByb2plY3RlZENlbnRyb2lkID0gdGhpcy5wcm9qZWN0aW9uKG5leHRIb3Zlci5jZW50cm9pZCk7CiAgICAgIGQzLnNlbGVjdCgnI2hvdmVyJykudGV4dChuZXh0SG92ZXIuYWRtaW4pLmF0dHIoJ3gnLCBwcm9qZWN0ZWRDZW50cm9pZFswXSkuYXR0cigneScsIHByb2plY3RlZENlbnRyb2lkWzFdKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/ec2-user/environment/major-studio-2/frameworks/05-geo/src/App.vue"],"names":[],"mappings":";;AA8BA,OAAO,KAAK,EAAZ,MAAoB,IAApB;AACA,OAAO,QAAP,MAAqB,WAArB;AACA,OAAO,GAAP,MAAgB,mBAAhB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,KADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,GAAG,kCACE,GADF;AAED,QAAA,QAAQ,EAAE,GAAG,CAAC,QAAJ,CAAa,GAAb,CAAiB,UAAA,CAAA;AAAA,iDACtB,CADsB;AAEzB,YAAA,UAAU,kCACL,CAAC,CAAC,UADG;AAER,cAAA,QAAQ,EAAE,EAAE,CAAC,WAAH,CAAe,CAAf;AAFF;AAFe;AAAA,SAAjB;AAFT,QADE;AAWL,MAAA,KAAK,EAAE,GAXF;AAYL,MAAA,MAAM,EAAE,GAZH;AAaL,MAAA,EAAE,EAAE;AAbC,KAAP;AAeD,GAlBY;AAmBb,EAAA,OAnBa,qBAmBH;AAAA;;AACR;AACA,IAAA,QAAQ,CAAC,WAAT,GAAuB,OAAO,CAAC,GAAR,CAAY,oBAAnC;AAEA,SAAK,EAAL,GAAU,IAAI,QAAQ,CAAC,GAAb,CAAiB;AACzB,MAAA,SAAS,EAAE,kBADc;AAEzB,MAAA,KAAK,EAAE,oCAFkB;AAGzB,MAAA,MAAM,EAAE,CAAC,EAAD,EAAK,CAAL,CAHiB;AAIzB,MAAA,IAAI,EAAE,CAJmB;AAKzB,MAAA,SAAS,EAAE,CACT,CAAC,CAAC,EAAF,EAAM,CAAC,EAAP,CADS,EAET,CAAC,EAAD,EAAK,EAAL,CAFS;AALc,KAAjB,CAAV;AAWA,SAAK,EAAL,CAAQ,EAAR,CAAW,MAAX,EAAmB,YAAM;AACvB,MAAA,KAAI,CAAC,EAAL,CAAQ,SAAR,CAAkB,cAAlB,EAAkC;AAChC,QAAA,IAAI,EAAE,SAD0B;AAEhC,QAAA,IAAI,EAAE;AAF0B,OAAlC;;AAKA,MAAA,KAAI,CAAC,EAAL,CAAQ,QAAR,CAAiB;AACf,QAAA,EAAE,EAAE,WADW;AAEf,QAAA,IAAI,EAAE,MAFS;AAGf,QAAA,MAAM,EAAE,cAHO;AAIf,QAAA,KAAK,EAAE;AACL,0BAAgB;AADX;AAJQ,OAAjB;AAQD,KAdD;AAeD,GAjDY;AAkDb,EAAA,QAAQ,EAAE;AACR,IAAA,UADQ,wBACK;AACX,aAAO,EAAE,CAAC,aAAH,GACJ,MADI,CACG,CAAC,EAAD,EAAK,CAAL,CADH,EAEJ,KAFI,CAEE,GAFF,EAGJ,SAHI,CAGM,CAAC,KAAK,KAAL,GAAW,CAAZ,EAAe,KAAK,MAAL,GAAY,CAA3B,CAHN,CAAP;AAID,KANO;AAOR,IAAA,OAPQ,qBAOE;AACR,aAAO,EAAE,CAAC,OAAH,CAAW,KAAK,UAAhB,CAAP;AACF;AATQ,GAlDG;AA6Db,EAAA,OAAO,EAAE;AACP,IAAA,OADO,mBACC,SADD,EACY;AACjB,UAAI,SAAQ,KAAM,IAAlB,EAAwB;AACtB,QAAA,EAAE,CAAC,MAAH,CAAU,QAAV,EAAoB,IAApB,CAAyB,EAAzB;AACA;AACF;;AACA,UAAM,iBAAgB,GAAI,KAAK,UAAL,CAAgB,SAAS,CAAC,QAA1B,CAA1B;AACA,MAAA,EAAE,CAAC,MAAH,CAAU,QAAV,EAAoB,IAApB,CAAyB,SAAS,CAAC,KAAnC,EACG,IADH,CACQ,GADR,EACa,iBAAiB,CAAC,CAAD,CAD9B,EAEG,IAFH,CAEQ,GAFR,EAEa,iBAAiB,CAAC,CAAD,CAF9B;AAGF;AAVO;AA7DI,CAAf","sourcesContent":["<template>\n<div class='App'>\n  <div class=\"header\">\n    <div class=\"legend\">\n      Legend Here\n    </div>\n  </div>\n  <el-divider></el-divider>\n  <div class=\"maps\">\n    <el-card>\n      <svg :height=\"height\" :width=\"width\">\n        <g class=\"paths\" @mouseleave=\"onHover(null)\">\n          <path\n            v-for=\"feature in map.features\"\n            :key=\"feature.properties.geounit\"\n            :d=\"geoPath(feature)\"\n            @mouseenter=\"onHover(feature.properties)\"\n          ></path>\n        </g>\n        <text id=\"hover\" :x=\"50\" :y=\"50\"></text>\n      </svg>\n    </el-card>\n    <!--<el-card>-->\n    <!--  <div id=\"mapbox-container\"></div>-->\n    <!--</el-card>-->\n  </div>\n</div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport mapboxgl from \"mapbox-gl\";\nimport map from './africa.geo.json'\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      map: {\n        ...map,\n        features: map.features.map(f => ({\n          ...f,\n          properties: {\n            ...f.properties,\n            centroid: d3.geoCentroid(f)\n          }\n        }))\n      },\n      width: 400,\n      height: 500,\n      mb: null\n    }\n  },\n  mounted() {\n    // https://dev.to/hmintoh/how-to-mapbox-with-vue-js-2a34\n    mapboxgl.accessToken = process.env.VUE_APP_MAPBOX_TOKEN;\n\n    this.mb = new mapboxgl.Map({\n      container: \"mapbox-container\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [18, 4],\n      zoom: 2,\n      maxBounds: [\n        [-18, -40],\n        [53, 40],\n      ],\n    });\n\n    this.mb.on('load', () => {\n      this.mb.addSource(\"countryPaths\", {\n        type: \"geojson\",\n        data: map\n      });\n\n      this.mb.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countryPaths',\n        paint: {\n          \"fill-opacity\": 0.5,\n        }\n      })\n    })\n  },\n  computed: {\n    projection() {\n      return d3.geoEqualEarth()\n        .center([18, 4])\n        .scale(320)\n        .translate([this.width/2, this.height/2]);\n    },\n    geoPath() {\n      return d3.geoPath(this.projection);\n    }\n  },\n  methods: {\n    onHover(nextHover) {\n      if (nextHover === null) {\n        d3.select('#hover').text('')\n        return;\n      }\n      const projectedCentroid = this.projection(nextHover.centroid)\n      d3.select('#hover').text(nextHover.admin)\n        .attr('x', projectedCentroid[0])\n        .attr('y', projectedCentroid[1])\n    }\n  }\n}\n</script>\n\n<style>\n  body {\n    padding: 0;\n    margin: 0;\n  }\n  .App {\n    display: flex;\n    flex-direction: column;\n  }\n  .header {\n    padding: 10px;\n    display: flex;\n  }\n  .legend {\n    margin: 10px;\n  }\n  .maps {\n    display: flex;\n    justify-content: space-around;\n  }\n  #mapbox-container {\n    height: 500px;\n    width: 400px;\n  }\n  text {\n    transition: fill-opacity 0.5s;\n    font-size: 12pt;\n    text-anchor: middle;\n    pointer-events: none;\n  }\n  path {\n    fill-opacity: 0.2;\n    stroke: black;\n  }\n  path:hover {\n    fill-opacity: 0.5;\n  }\n</style>\n"],"sourceRoot":""}]}